# 图生图功能使用指南

## 📋 功能简介

图生图（Image-to-Image）功能可以基于您上传的参考图片，根据文字描述生成新的图片。适用于：

- ✨ 图片风格转换（如照片转油画、动漫风格等）
- 🎨 艺术效果增强
- 🔄 图片再创作
- 🖼️ 参考图改编

---

## 🚀 快速开始

### 1. 打开图生图功能

在工具页面顶部，点击 **"图生图"** 标签

### 2. 上传参考图片

**方式一：拖拽上传**
- 直接将图片拖拽到上传区域

**方式二：选择文件**
- 点击"选择图片"按钮
- 从电脑中选择图片文件

**支持格式：**
- JPG、JPEG
- PNG
- WebP

**限制：**
- 单个文件最大 10MB
- 建议尺寸：512x512 ~ 2048x2048

### 3. 设置效果参数

#### 效果描述（必填）
描述您想要的图片效果，例如：
- "转换为油画风格，增强色彩饱和度"
- "改为动漫风格，添加卡通效果"
- "转换为水彩画，柔和的色调"

#### 转换强度（重要！）
- **0.1 - 0.3**: 保留原图大部分特征，轻微调整
- **0.4 - 0.6**: 平衡模式，适度变化（推荐）
- **0.7 - 1.0**: 大幅度改变，可能与原图差异较大

💡 **建议：**
- 首次尝试使用 0.5
- 如果变化太大，降低强度值
- 如果变化不够，提高强度值

#### 艺术风格
选择目标风格：
- 🎨 **自动** - AI自动判断
- 🖼️ **油画** - 油画质感
- 🎭 **动漫** - 日系动漫风格
- 💧 **水彩** - 水彩画效果
- ✏️ **素描** - 素描风格
- 🏮 **中国画** - 传统国画
- 🎯 **3D卡通** - 3D渲染效果
- 📐 **扁平插画** - 扁平化设计

#### 图片尺寸
- **1024×1024** - 正方形（推荐）
- **1280×720** - 横版
- **720×1280** - 竖版
- **512×512** - 小尺寸（快速）

#### 负面提示词（可选）
描述您不想要的元素，例如：
- "模糊、低质量、噪点"
- "过度曝光、颜色失真"

### 4. 开始转换

点击 **"开始转换"** 按钮，等待几秒钟即可看到结果

---

## 💡 使用技巧

### 提示词编写建议

#### ✅ 好的提示词示例

```
将这张照片转换为莫奈风格的印象派油画，增强色彩的柔和度，
添加笔触感，保持原有构图
```

```
转换为吉卜力工作室风格的动漫场景，柔和的色调，
手绘质感，充满童话氛围
```

```
改为水彩画风格，淡雅的色彩，纸张纹理，
艺术感强，保持主体清晰
```

#### ❌ 不好的提示词

```
好看点  ← 太模糊
```

```
变成油画  ← 缺少细节描述
```

### 不同场景的推荐设置

#### 人物肖像转换
- **转换强度**: 0.4 - 0.5
- **风格**: 油画或动漫
- **提示词**: "将人物转换为XX风格，保持面部特征清晰，增强艺术感"

#### 风景照片转换
- **转换强度**: 0.5 - 0.7
- **风格**: 油画、水彩或中国画
- **提示词**: "转换为XX风格的风景画，增强色彩层次，保持景深"

#### 建筑物转换
- **转换强度**: 0.3 - 0.5
- **风格**: 素描或3D卡通
- **提示词**: "转换为XX风格，保持建筑结构清晰，增加艺术效果"

---

## 🔧 API配置

### 当前支持的API

#### 1. Pollinations.ai（默认，完全免费）
- ✅ 无需配置
- ✅ 无限次数
- ⚠️ 功能相对基础

#### 2. Replicate（推荐，高质量）
需要在服务器端配置：

```javascript
// js/api-config.js
API_CONFIG.provider = 'replicate'; // 切换到Replicate

// 服务器端（需要添加对应路由）
// server-with-r2.js 中添加 /api/img2img 接口
```

#### 3. 通义万相（国内可用）
```javascript
API_CONFIG.provider = 'tongyi';
```

### 切换API方案

在 `js/api-config.js` 中修改：

```javascript
const API_CONFIG = {
    provider: 'pollinations', // 改为 'replicate' 或 'tongyi'
    // ...
};
```

---

## 📊 功能对比

| 功能 | Pollinations | Replicate | 通义万相 |
|------|-------------|-----------|---------|
| 价格 | 完全免费 | 100次/月免费 | 需要付费 |
| 质量 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 速度 | 快 | 中等 | 快 |
| 配置 | 无需配置 | 需要API Key | 需要API Key |
| 推荐度 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

---

## ⚠️ 常见问题

### Q: 为什么生成的图片与原图差异很大？
**A:** 可能是转换强度设置过高，建议：
- 将强度降低到 0.3 - 0.5
- 在提示词中明确要求"保持原图特征"

### Q: 上传的图片无法预览？
**A:** 检查：
- 图片格式是否支持（JPG、PNG、WebP）
- 文件大小是否超过10MB
- 浏览器是否允许文件访问

### Q: 转换速度很慢？
**A:** 这是正常的，根据不同API：
- Pollinations: 通常5-10秒
- Replicate: 可能需要10-30秒
- 如果超过1分钟，可能是网络问题

### Q: 如何获得更好的效果？
**A:** 建议：
1. 使用高质量的参考图片
2. 详细描述想要的效果
3. 尝试不同的转换强度
4. 使用负面提示词排除不想要的元素
5. 如果条件允许，使用Replicate API

### Q: 生成的图片可以商用吗？
**A:** 
- Pollinations: 可以自由使用
- Replicate: 需要查看具体模型的许可
- 通义万相: 需要查看服务条款
- 建议用于个人学习和创作

---

## 🎯 实战案例

### 案例1：照片转油画

**原图**: 普通风景照片  
**设置**:
- 转换强度: 0.5
- 风格: 油画
- 提示词: "转换为印象派油画风格，明亮的色彩，可见的笔触，艺术氛围浓厚"

**效果**: 照片成功转换为具有油画质感的艺术作品

### 案例2：人像转动漫

**原图**: 真人自拍照  
**设置**:
- 转换强度: 0.4
- 风格: 动漫
- 提示词: "转换为日系动漫风格，大眼睛，柔和的线条，保持人物特征"

**效果**: 真人照片转换为动漫风格插画

### 案例3：建筑转素描

**原图**: 建筑物照片  
**设置**:
- 转换强度: 0.6
- 风格: 素描
- 提示词: "转换为建筑素描，清晰的线条，阴影表现，铅笔画效果"

**效果**: 照片转换为专业的建筑素描

---

## 📚 相关资源

- [免费图生图API推荐](./图生图免费API推荐.md)
- [API配置指南](./API_SETUP_GUIDE.md)
- [提示词优化建议](./提示词优化建议.md)

---

## 🆘 需要帮助？

如果遇到问题：
1. 查看本指南的常见问题部分
2. 检查浏览器控制台的错误信息
3. 尝试刷新页面重新操作
4. 查看 [API配置指南](./API_SETUP_GUIDE.md)

---

**更新日期**: 2025年10月22日  
**版本**: v1.0



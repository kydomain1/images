# 提示词多语言切换功能说明

## 📋 修改概述

### 问题
- 用户切换语言后，推荐提示词按钮和输入框的提示文本仍然是中文
- `data-prompt` 属性硬编码为中文，没有随语言切换

### 解决方案

#### 1. HTML 结构调整 (`tool.html`)
```html
<!-- 修改前 -->
<button class="suggestion-btn" data-prompt="一只可爱的橘猫坐在窗台上...">
    <span data-i18n="suggest.cat">可爱橘猫</span>
</button>

<!-- 修改后 -->
<button class="suggestion-btn" data-i18n-prompt="suggest.catPrompt">
    <span data-i18n="suggest.cat">可爱橘猫</span>
</button>
```

#### 2. 添加翻译内容 (`js/i18n.js`)

**中文 (zh)**
```javascript
'suggest.catPrompt': '一只可爱的橘猫坐在窗台上，阳光洒在它的身上，油画风格，细节丰富',
'suggest.cityPrompt': '未来主义城市景观，赛博朋克风格，霓虹灯，夜晚，高楼大厦，科幻感',
'suggest.forestPrompt': '梦幻森林，魔法氛围，发光的蘑菇，仙女，奇幻风格，柔和光线',
'suggest.spacePrompt': '宇宙星空，星云，行星，深邃的太空，壮观的宇宙景象，超现实主义',
'suggest.sakuraPrompt': '日本樱花盛开的街道，春天，粉色花瓣飘落，传统建筑，动漫风格',
'suggest.dragonPrompt': '古代龙，威武雄壮，东方神话风格，云雾缭绕，金色鳞片',
```

**英文 (en)**
```javascript
'suggest.catPrompt': 'A cute orange cat sitting on a windowsill, sunlight shining on it, oil painting style, highly detailed',
'suggest.cityPrompt': 'Futuristic cityscape, cyberpunk style, neon lights, nighttime, skyscrapers, sci-fi atmosphere',
'suggest.forestPrompt': 'Dreamy forest, magical atmosphere, glowing mushrooms, fairies, fantasy style, soft lighting',
'suggest.spacePrompt': 'Cosmic space, nebula, planets, deep space, spectacular universe view, surrealism',
'suggest.sakuraPrompt': 'Japanese street with blooming cherry blossoms, spring, pink petals falling, traditional architecture, anime style',
'suggest.dragonPrompt': 'Ancient dragon, majestic and powerful, Eastern mythology style, surrounded by clouds and mist, golden scales',
```

#### 3. 添加处理逻辑 (`js/i18n.js`)

在 `updatePageLanguage()` 函数中添加：
```javascript
// 更新带有data-i18n-prompt属性的元素（用于推荐提示词按钮）
document.querySelectorAll('[data-i18n-prompt]').forEach(element => {
    const key = element.getAttribute('data-i18n-prompt');
    const text = t(key);
    element.setAttribute('data-prompt', text);
});
```

## ✅ 功能特性

1. **自动切换**
   - 切换语言后，所有推荐提示词自动更新为目标语言
   - 输入框 placeholder 也同步更新

2. **支持的推荐提示词**
   - 🐱 可爱橘猫 / Cute Cat
   - 🌃 赛博朋克城市 / Cyberpunk City
   - 🌲 魔法森林 / Magic Forest
   - 🌌 宇宙星空 / Cosmic Space
   - 🌸 樱花街道 / Sakura Street
   - 🐉 东方神龙 / Eastern Dragon

3. **实时生效**
   - 语言切换后立即更新 `data-prompt` 属性
   - 用户点击按钮时使用当前语言的提示词

## 🧪 测试步骤

### 测试1: 中英文切换
1. 打开网站，默认显示英文
2. 点击任意推荐按钮
3. 检查输入框中是否填入英文提示词
4. 切换到中文
5. 再次点击同一按钮
6. 检查输入框中是否填入中文提示词

### 测试2: Placeholder更新
1. 打开页面（英文）
2. 检查输入框 placeholder 是否为英文
3. 切换到中文
4. 检查 placeholder 是否变为中文
5. 切换到其他语言测试

### 测试3: 实际生成
1. 选择英文语言
2. 点击"Cute Cat"按钮
3. 点击Generate生成图片
4. 检查API接收的是否为英文提示词

## 📊 技术细节

### 工作原理
```
1. 页面加载 → 初始化语言 → updatePageLanguage()
2. 查找 [data-i18n-prompt] 元素
3. 从翻译表中获取对应语言的提示词文本
4. 更新元素的 data-prompt 属性
5. 用户点击按钮时，读取 data-prompt 填入输入框
```

### 优势
- 无需修改 `tool.js` 中的事件监听逻辑
- 使用统一的 i18n 系统管理所有文本
- 扩展性强，易于添加新的推荐提示词

## 📦 相关文件

| 文件 | 修改内容 |
|------|---------|
| `tool.html` | 将 `data-prompt` 改为 `data-i18n-prompt` |
| `js/i18n.js` | 添加提示词翻译和处理逻辑 |

## 🔄 Git 提交

```bash
git add tool.html js/i18n.js
git commit -m "feat: 推荐提示词支持多语言切换"
git push origin main
```

## 🎯 下一步

等待 Vercel 自动部署完成后测试：
1. 访问网站
2. 切换不同语言
3. 测试推荐提示词是否正确切换
4. 测试实际生成图片的效果

---

**修改时间**: 2025-11-01  
**状态**: ✅ 已完成本地修改，等待推送


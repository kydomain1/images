# ğŸš€ åŒå¹³å°éƒ¨ç½²æŒ‡å—ï¼ˆVercel + Cloudflareï¼‰

## ğŸ“… æ—¥æœŸï¼š2025-10-25

---

## ğŸ¯ éƒ¨ç½²æ¶æ„

### **é¡¹ç›®ç»“æ„**

```
D:\images\
â”œâ”€â”€ api/                      # Vercel Functions (Node.js)
â”‚   â”œâ”€â”€ tongyi-generate.js
â”‚   â””â”€â”€ remove-bg.js
â”‚
â”œâ”€â”€ functions/                # Cloudflare Workers (æ–°å¢)
â”‚   â”œâ”€â”€ tongyi-generate.js
â”‚   â””â”€â”€ remove-bg.js
â”‚
â”œâ”€â”€ index.html
â”œâ”€â”€ tool.html
â”œâ”€â”€ js/
â”œâ”€â”€ css/
â”œâ”€â”€ vercel.json              # Vercelé…ç½®
â”œâ”€â”€ wrangler.toml            # Cloudflareé…ç½®
â”œâ”€â”€ _headers                 # Cloudflare Headers
â”œâ”€â”€ _redirects               # Cloudflareé‡å®šå‘
â””â”€â”€ ...
```

### **å¹³å°å¯¹æ¯”**

| ç‰¹æ€§ | Vercel | Cloudflare |
|------|--------|------------|
| è¿è¡Œæ—¶ | Node.js | Workers (V8) |
| APIç›®å½• | `api/` | `functions/` |
| é…ç½®æ–‡ä»¶ | `vercel.json` | `wrangler.toml`, `_redirects` |
| ç¯å¢ƒå˜é‡ | Vercel Dashboard | Cloudflare Dashboard |
| æ„å»ºæ—¶é—´ | ~2åˆ†é’Ÿ | ~1åˆ†é’Ÿ |
| å…¨çƒCDN | âœ… | âœ… |

---

## ğŸ“ ç¬¬ä¸€æ­¥ï¼šæäº¤ä»£ç 

### **1. æŸ¥çœ‹æ–°å¢æ–‡ä»¶**

```bash
git status
```

åº”è¯¥çœ‹åˆ°ï¼š
```
æ–°æ–‡ä»¶:   functions/tongyi-generate.js
æ–°æ–‡ä»¶:   functions/remove-bg.js
æ–°æ–‡ä»¶:   wrangler.toml
æ–°æ–‡ä»¶:   _headers
æ–°æ–‡ä»¶:   _redirects
æ–°æ–‡ä»¶:   .gitignore
ä¿®æ”¹:     api/tongyi-generate.js
ä¿®æ”¹:     js/api-config.js
ä¿®æ”¹:     vercel.json
```

### **2. æäº¤æ‰€æœ‰æ›´æ”¹**

```bash
git add .
git commit -m "feat: æ·»åŠ åŒå¹³å°æ”¯æŒ - Vercelå’ŒCloudflare"
```

---

## ğŸŸ¢ Verceléƒ¨ç½²ï¼ˆå¹³å°1ï¼‰

### **æ­¥éª¤1ï¼šæ¨é€åˆ°GitHub**

```bash
git push origin main
```

### **æ­¥éª¤2ï¼šè‡ªåŠ¨éƒ¨ç½²**

Vercelä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ›´æ–°ï¼š
- âœ… æ£€æµ‹ `vercel.json` é…ç½®
- âœ… ä½¿ç”¨ `api/` ç›®å½•çš„å‡½æ•°
- âœ… åº”ç”¨ç¯å¢ƒå˜é‡ï¼ˆå·²é…ç½®ï¼‰
- âœ… 1-2åˆ†é’Ÿåå®Œæˆéƒ¨ç½²

### **æ­¥éª¤3ï¼šéªŒè¯**

è®¿é—®ï¼š`https://your-project.vercel.app/`
- æµ‹è¯•å›¾ç‰‡ç”ŸæˆåŠŸèƒ½
- æ£€æŸ¥APIæ˜¯å¦æ­£å¸¸

---

## ğŸŸ  Cloudflareéƒ¨ç½²ï¼ˆå¹³å°2ï¼‰

### **æ–¹æ³•1ï¼šé€šè¿‡GitHubè¿æ¥ï¼ˆæ¨èï¼‰**

#### **æ­¥éª¤1ï¼šåˆ›å»ºCloudflare Pagesé¡¹ç›®**

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. ç‚¹å‡»å·¦ä¾§ **"Workers & Pages"**
3. ç‚¹å‡» **"åˆ›å»ºåº”ç”¨ç¨‹åº"**
4. é€‰æ‹© **"Pages"** â†’ **"è¿æ¥åˆ°Git"**

#### **æ­¥éª¤2ï¼šè¿æ¥GitHubä»“åº“**

1. æˆæƒCloudflareè®¿é—®GitHub
2. é€‰æ‹©æ‚¨çš„ `images` ä»“åº“
3. ç‚¹å‡» **"å¼€å§‹è®¾ç½®"**

#### **æ­¥éª¤3ï¼šé…ç½®æ„å»ºè®¾ç½®**

```
é¡¹ç›®åç§°: ai-image-tools
ç”Ÿäº§åˆ†æ”¯: main
æ¡†æ¶é¢„è®¾: æ— 
æ„å»ºå‘½ä»¤: (ç•™ç©º)
æ„å»ºè¾“å‡ºç›®å½•: /
æ ¹ç›®å½•: /
```

#### **æ­¥éª¤4ï¼šæ·»åŠ ç¯å¢ƒå˜é‡**

åœ¨ **"ç¯å¢ƒå˜é‡"** éƒ¨åˆ†æ·»åŠ ï¼š

| å˜é‡åç§° | å€¼ | ç±»å‹ |
|---------|---|------|
| `TONGYI_API_KEY` | æ‚¨çš„é€šä¹‰ä¸‡ç›¸APIå¯†é’¥ | åŠ å¯† |
| `REMOVEBG_API_KEY` | æ‚¨çš„RemoveBG APIå¯†é’¥ | åŠ å¯† |

#### **æ­¥éª¤5ï¼šä¿å­˜å¹¶éƒ¨ç½²**

1. ç‚¹å‡» **"ä¿å­˜å¹¶éƒ¨ç½²"**
2. ç­‰å¾…1-2åˆ†é’Ÿå®Œæˆé¦–æ¬¡éƒ¨ç½²
3. è·å¾—CloudflareåŸŸåï¼š`https://ai-image-tools.pages.dev`

---

### **æ–¹æ³•2ï¼šé€šè¿‡Wrangler CLIï¼ˆé«˜çº§ï¼‰**

#### **æ­¥éª¤1ï¼šå®‰è£…Wrangler**

```bash
npm install -g wrangler
```

#### **æ­¥éª¤2ï¼šç™»å½•Cloudflare**

```bash
wrangler login
```

#### **æ­¥éª¤3ï¼šåˆ›å»ºPagesé¡¹ç›®**

```bash
wrangler pages project create ai-image-tools
```

#### **æ­¥éª¤4ï¼šéƒ¨ç½²**

```bash
wrangler pages deploy . --project-name=ai-image-tools
```

#### **æ­¥éª¤5ï¼šé…ç½®ç¯å¢ƒå˜é‡**

```bash
wrangler pages secret put TONGYI_API_KEY --project-name=ai-image-tools
wrangler pages secret put REMOVEBG_API_KEY --project-name=ai-image-tools
```

---

## âœ… éƒ¨ç½²åéªŒè¯

### **Vercelç«™ç‚¹**
```
https://your-project.vercel.app/
```

### **Cloudflareç«™ç‚¹**
```
https://ai-image-tools.pages.dev/
```

### **æµ‹è¯•æ¸…å•**

å¯¹**ä¸¤ä¸ªå¹³å°**åˆ†åˆ«æµ‹è¯•ï¼š

- [ ] è®¿é—®é¦–é¡µ
- [ ] è®¿é—®å·¥å…·é¡µ
- [ ] æµ‹è¯•å›¾ç‰‡ç”Ÿæˆï¼ˆé€šä¹‰ä¸‡ç›¸APIï¼‰
- [ ] æµ‹è¯•èƒŒæ™¯ç§»é™¤ï¼ˆRemoveBG APIï¼‰
- [ ] æ£€æŸ¥CSS/JSåŠ è½½
- [ ] æµ‹è¯•å¤šè¯­è¨€åˆ‡æ¢
- [ ] æ£€æŸ¥å“åº”é€Ÿåº¦

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### **Vercelé—®é¢˜**

**å¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼š**
1. æ£€æŸ¥Vercel Dashboard â†’ Settings â†’ Environment Variables
2. ç¡®è®¤ `TONGYI_API_KEY` å·²é…ç½®
3. æŸ¥çœ‹ Deployments â†’ Runtime Logs

**å¦‚æœ404é”™è¯¯ï¼š**
1. æ£€æŸ¥ `vercel.json` é…ç½®
2. ç¡®è®¤æ–‡ä»¶è·¯å¾„æ­£ç¡®

---

### **Cloudflareé—®é¢˜**

**å¦‚æœAPIè°ƒç”¨å¤±è´¥ï¼š**
1. æ£€æŸ¥ Cloudflare Pages â†’ Settings â†’ Environment Variables
2. ç¡®è®¤å˜é‡åç§°å®Œå…¨ä¸€è‡´ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
3. æŸ¥çœ‹ Workers â†’ Logs

**å¦‚æœå‡½æ•°è¶…æ—¶ï¼š**
1. Cloudflareå…è´¹ç‰ˆé™åˆ¶ï¼šCPUæ—¶é—´50ms
2. é€šä¹‰ä¸‡ç›¸è½®è¯¢å¯èƒ½è¶…æ—¶
3. è€ƒè™‘ä½¿ç”¨Cloudflare Workers Paidè®¡åˆ’

---

## ğŸŒ è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

### **Vercelè‡ªå®šä¹‰åŸŸå**

1. Vercel Dashboard â†’ Settings â†’ Domains
2. æ·»åŠ æ‚¨çš„åŸŸå
3. é…ç½®DNSè®°å½•ï¼ˆCNAMEï¼‰

### **Cloudflareè‡ªå®šä¹‰åŸŸå**

1. Cloudflare Pages â†’ è‡ªå®šä¹‰åŸŸ
2. æ·»åŠ åŸŸå
3. è‡ªåŠ¨é…ç½®DNSï¼ˆå¦‚æœåŸŸååœ¨Cloudflareï¼‰

---

## ğŸ“Š åŒå¹³å°ä¼˜åŠ¿

### **âœ… å†—ä½™å¤‡ä»½**
- ä¸€ä¸ªå¹³å°æ•…éšœï¼Œå¦ä¸€ä¸ªä»å¯ç”¨
- æé«˜æ•´ä½“å¯ç”¨æ€§

### **âœ… æ€§èƒ½ä¼˜åŒ–**
- å¯æ ¹æ®åœ°åŒºé€‰æ‹©æœ€å¿«çš„å¹³å°
- Cloudflare: å…¨çƒè¾¹ç¼˜ç½‘ç»œ
- Vercel: ä¼˜åŒ–çš„CDN

### **âœ… è´Ÿè½½åˆ†æ‹…**
- å¯ä»¥ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨
- åˆ†æµè®¿é—®é‡

### **âœ… A/Bæµ‹è¯•**
- å¯ä»¥æµ‹è¯•ä¸åŒé…ç½®
- æ¯”è¾ƒæ€§èƒ½å·®å¼‚

---

## ğŸ”„ æŒç»­éƒ¨ç½²

### **æ¨é€ä»£ç è‡ªåŠ¨éƒ¨ç½²**

```bash
# ä¿®æ”¹ä»£ç å
git add .
git commit -m "æ›´æ–°åŠŸèƒ½"
git push origin main
```

**è‡ªåŠ¨è§¦å‘ï¼š**
- âœ… Vercelè‡ªåŠ¨éƒ¨ç½²
- âœ… Cloudflareè‡ªåŠ¨éƒ¨ç½²
- â±ï¸ çº¦2-3åˆ†é’Ÿå®Œæˆ

---

## ğŸ“ˆ ç›‘æ§å’Œåˆ†æ

### **Vercel Analytics**
- Dashboard â†’ Analytics
- æŸ¥çœ‹è®¿é—®é‡ã€æ€§èƒ½æŒ‡æ ‡

### **Cloudflare Analytics**
- Pages â†’ Analytics
- æŸ¥çœ‹è¯·æ±‚æ•°ã€å¸¦å®½ä½¿ç”¨

---

## ğŸ’° æˆæœ¬å¯¹æ¯”

### **Vercel**
- å…è´¹ç‰ˆï¼šä¸ªäººé¡¹ç›®è¶³å¤Ÿ
- Proç‰ˆï¼š$20/æœˆï¼ˆå›¢é˜Ÿä½¿ç”¨ï¼‰

### **Cloudflare**
- å…è´¹ç‰ˆï¼šæ— é™è¯·æ±‚ï¼ˆæœ‰CPUæ—¶é—´é™åˆ¶ï¼‰
- Proç‰ˆï¼š$5/æœˆèµ·

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨æ‚¨çš„é¡¹ç›®å·²ç»ï¼š
- âœ… åŒæ—¶éƒ¨ç½²åœ¨Vercelå’ŒCloudflare
- âœ… ä¸¤ä¸ªç‹¬ç«‹åŸŸåè®¿é—®
- âœ… è‡ªåŠ¨æŒç»­éƒ¨ç½²
- âœ… é«˜å¯ç”¨æ€§ä¿éšœ

**æ¨é€ä»£ç åï¼Œä¸¤ä¸ªå¹³å°éƒ½ä¼šåœ¨2-3åˆ†é’Ÿå†…å®Œæˆéƒ¨ç½²ï¼** ğŸš€

---

**éƒ¨ç½²æŒ‡å—åˆ›å»ºæ—¶é—´ï¼š** 2025-10-25

